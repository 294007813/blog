/*! bh-lay.com 2014-06-07 */
define&&define(function(a){function b(a,b){var c=a.replace(/\{(\w*)}/g,function(){return b[arguments[1]]||""});return c}function c(a,b){a||b&&b("missing arguments"),$.ajax({url:"/ajax/labs",type:"GET",data:{content_format:"markdown",act:"get_detail",id:a},success:function(a){1!=a.code?b&&b("data error"):b&&b(null,a.detail)}})}function d(a,d){if(!d){var f=b(e,{});return a.html(f),admin.formToAjax(a,{onSubmit:function(){UI.prompt("正在提交实验室的修改！")},onResponse:function(){UI.prompt("实验室发布完毕"),admin.push("/admin/"),admin.refresh()}}),void mditor.bind(a.find("textarea.mditor"))}c(d,function(c,d){if(c)return void a.html("数据异常！");var f=b(e,d);a.html(f),mditor.bind(a.find("textarea.mditor")),admin.formToAjax(a,{onSubmit:function(){UI.prompt("正在提交实验室修改！")},onResponse:function(){UI.prompt("实验室修改完毕"),admin.push("/admin/"),admin.refresh()}})})}a("/frontEnd/publish/publish.css"),a("/frontEnd/mditor/mditor.js"),a("/frontEnd/gallery/index.js");var e=['<div class="pub_labs">','<form action="/ajax/add_edit" method="post" target="_self">','<div class="pub_row_input"><input type="text" name="name" value="{name}" placeholder="插件名"/></div>','<div class="pub_row_input"><input type="text" name="title" value="{title}" placeholder="标题"/></div>','<div class="pub_row_input"><input type="text" name="cover" value="{cover}" placeholder="缩略图" /></div>','<div class="pub_row_input"><input type="text" name="time_create" value="{opus_time_create}" placeholder="创作时间" /></div>','<div class="pub_row_input">','<textarea name="intro" cols="50" rows="5" placeholder="插件简介">{intro}</textarea>',"</div>",'<div class="pub_row_input"><input type="text" name="git_full_name" value="{git_full_name}" placeholder="github地址（如“bh-lay/uploader”）" /></div>','<div class="pub_row_input"><input type="text" name="demo_url" value="{demo_url}" placeholder="demo地址" /></div>','<div class="pub_row_input">','<textarea class="mditor" name="content" cols="50" rows="10" placeholder="插件详细介绍" >{content}</textarea>',"</div>","<div>",'<input type="hidden" name="id" value="{id}" />','<input type="hidden" name="category" value="labs" />','<button type="submit" class="btn btn-primary">提交</button>',"</div>","</form>","</div>"].join("");return d});