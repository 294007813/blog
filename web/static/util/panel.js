/*! bh-lay.com 2014-06-17 */
window.util=window.util||{},window.util.panel=window.util.panel||function(a){var a=a||{},b=a.targets||null,c=a.type||"menu",d=a.list||{},e=a.callback||null,f=a.callbefore||null;return new window.util.panel.init(b,c,d,e,f)},function(a){function b(){h=m.width(),i=m.height(),j=m.scrollTop(),k=m.scrollLeft()}function c(a,b){"object"==typeof this.list[a]&&(this.list[a].display=b)}function d(){n&&(n.fadeOut(100,function(){$(this).remove()}),n=null)}function e(a,b,c,e,f,g){var m="";switch(c){case"menu":m=o.join("");break;case"dock":m=p.join("");break;default:return void l.log("error")}var q="";for(var r=0 in e)switch(e[r].display=e[r].display||"show",e[r].display){case"show":q+=e[r].callback?'<a data-callback="true" data-name="'+(r||"")+'" href="javascript:;">'+(e[r].txt||"")+"</a>":'<a data-name="'+(r||"")+'" href="javascript:;">'+(e[r].txt||"")+"</a>";break;case"disable":q+='<span data-name="'+(r||"")+'" href="javascript:;">'+(e[r].txt||"")+"</span>"}m=m.replace(/{-content-}/,q);var s=$(m);s.on("click","a",function(){d();var a=$(this).attr("data-name")||"";if($(this).attr("data-callback")){var a=$(this).attr("data-name");e[a].callback&&e[a].callback.call(f,a)}else g.call(f,a)}),d(),$("body").append(s),n=s;var t=s.outerHeight(),u=s.outerWidth();t+b>i+j&&(b=j+i-t),u+a>h+k&&(a=k+h-u),s.css({top:b,left:a})}function f(a){var b={};for(var c=0 in a)b[c]={},b[c].txt=a[c].txt,b[c].display=a[c].display&&a[c].display.match(/^(show|hide|disable)$/)?a[c].display:"show",b[c].callback=a[c].callback||null;return b}function g(a,b,c,g,h){var i=this;this.type=b,this.list=f(c),a&&$("body").on("mousedown",a,function(a){var b=this;if(d(),!a.target.tagName.match(/INPUT|TEXTAREA/i)&&2==a.button){a.bubbles=!1,a.cancelBubble=!0,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation();var c=a.pageX,f=a.pageY;h&&h.call(b),setTimeout(function(){e(c,f,i.type,i.list,b,g)},40)}}).on("contextmenu",a,function(a){return a.target.tagName.match(/INPUT|TEXTAREA/i)?void 0:!1})}var h,i,j,k,l=window.console||{log:function(){}},m=$(window),n=null,o=($("html,body"),['<div class="panel_menu panel_mark"><ul class="pa_me_list">{-content-}</ul></div>']),p=['<div class="panel_dock panel_mark"><div class="pa_do_body">{-content-}</div></div>'],q=['<style type="text/css">',".panel_menu{position: absolute;z-index :10000;width:140px;background:#fff;border:1px solid #bbb;border-radius:4px;}",".pa_me_list{padding:5px 0px;margin:0px;}",".pa_me_list span,",".pa_me_list a{line-height:24px;display:block;font-size:12px;text-indent:2em;padding: 2px 5px;text-decoration:none;}",".pa_me_list span{cursor: default;color:#aaa;}",".pa_me_list a{color:#444;}",".pa_me_list a:hover{color:#000;background:#eee;}",".panel_dock{position: absolute;z-index :10000;background:#444;border-radius:4px;box-shadow:1px 1px 40px #000;_border:1px solid #666;}",".pa_do_body{padding:0px 10px;}",".panel_dock span,",".panel_dock a{line-height:32px;display:inline-block;font-size:12px;color:#888;padding: 0px 10px;}",".panel_dock span{cursor: default;}",".panel_dock a{color:#f4f4f4;}",".panel_dock a:hover{color:#222;background:#eee;}","</style>"];b(),setTimeout(b,1e3),$(function(){$("head").append(q.join(""));var a=!1;$("body").on("mousedown",".panel_mark",function(){a=!0}).on("mousedown",function(){setTimeout(function(){a||d(),a=!1},20)}).on("contextmenu",".panel_mark",function(){return!1});var c;$(window).on("resize scroll",function(){clearTimeout(c),c=setTimeout(function(){b(),d()},100)})}),g.prototype={display:function(a,b){if(b&&b.match(/^(show|hide|disable)$/))if("[object Array]"==Object.prototype.toString.call(a))for(var d=0,e=a.length;e>d;d++)c.call(this,a[d],b);else{if("string"!=typeof a)return;c.call(this,a,b)}},add:function(a,b,c){b.display&&b.display.match(/^(show|hide|disable)$/)||(b.display=null),this.list[a]=this.list[a]||{};var d=this.list[a];d.txt=b.txt||d.txt,d.display=b.display||d.display,d.callback=c||d.callback},remove:function(a){"object"==typeof this.list[a]&&delete this.list[a]}},a.init=g}(window.util.panel),window.define&&define(function(){return window.util.panel});