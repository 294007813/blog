/*! bh-lay.com 2014-06-17 */
define(function(a){a("/frontEnd/lib/juicer.js"),a("/frontEnd/public/css/labs.css");var b=["{@each list as it,index}",'<li><div class="lab_item">','<a class="lab_cover" href="/labs/${it.name}" title="${it.title}" target="_blank" style="background-image:url(${it.cover})"></a>','<h4 class="lab_title">','<a href="/labs/${it.name}" title="${it.title}" target="_blank">${it.title}</a>',"</h4>",'<div class="lab_info">',"<p>${it.intro}</p>","</div>","</div></li>","{@/each}"].join(""),c=20,d=0,e=null,f=function(a){var b=$(a.html),c=a.dom;c.append(b)},g=function(a){$.ajax({type:"GET",url:"/ajax/labs",data:{act:"get_list",skip:d,limit:c},success:function(b){e=b.count,d+=c;for(var f=b.list,g=0,h=f.length;h>g;g++)f[g].work_range=f[g].work_range?f[g].work_range.split(/\,/):["暂未填写"];a&&a(f)}})},h=function(){$(".shareList").on("mouseenter","a",function(){$(this).find("strong").stop().animate({bottom:0},200)}).on("mouseleave","a",function(){$(this).find("strong").stop().animate({bottom:-100},200)})};return function(a){d=0,g(function(c){a.html('<div class="l_row"><div class="l_col_12"><ul class="labsList"></ul></div></div>');var g=juicer(b,{list:c}),i=a.find(".labsList");f({end:d>=e?!0:!1,html:g,dom:i}),h()})}});