/*! bh-lay.com 2014-06-07 */
define(function(a){a("/frontEnd/lib/juicer.js"),a("/frontEnd/public/css/opus.css");var b=["{@each list as it,index}","<li>",'<div class="opus_cover">','<a href="/opus/${it.id}" title="${it.title}" target="_self" lofox="true" >','<img src="${it.cover}" alt="${it.title}" />',"</a>","</div>",'<div class="opus_info">','<h3><a href="/opus/${it.id}" target="_self" lofox="true" >${it.title}</a></h3>',"<p><strong>开发范围：</strong>","{@each it.work_range as that,index}","<span>${that}</span>","{@/each}","</p>","<p><strong>在线地址：</strong>","{@if it.online_url}",'<a href="${it.online_url}">${it.online_url}</a>',"{@else}","<span>无在线地址</span>","{@/if}","</p>","</div>","</li>","{@/each}"].join(""),c=20,d=0,e=null,f=function(a){var b=$(a.html),c=a.dom;c.append(b)},g=function(a){$.ajax({type:"GET",url:"/ajax/opus",data:{act:"get_list",skip:d,limit:c},success:function(b){e=b.count,d+=c;for(var f=b.list,g=0,h=f.length;h>g;g++)f[g].work_range=f[g].work_range?f[g].work_range.split(/\,/):["暂未填写"];a&&a(f)}})},h=function(){$(".shareList").on("mouseenter","a",function(){$(this).find("strong").stop().animate({bottom:0},200)}).on("mouseleave","a",function(){$(this).find("strong").stop().animate({bottom:-100},200)})};return function(a){var c=this.render_over||null;d=0,a.html('<div class="golCnt"><div class="opusList"><ul></ul></div></div>'),g(function(g){var i=juicer(b,{list:g}),j=a.find(".opusList ul");f({end:d>=e?!0:!1,html:i,dom:j}),h(),c&&c()})}});