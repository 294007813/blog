/*! bh-lay.com 2014-06-07 */
window.UI=window.UI||{},function(a){function b(){A=document.body.clientWidth,D=I.scrollTop(),B=window.innerHeight,C=J.height()}function c(a,c,d){function e(d){b(),h=d.pageX,i=d.pageY,j=parseInt(c.css("left")),k=parseInt(c.css("top")),l=parseInt(c.outerWidth()),m=parseInt(c.outerHeight()),J.mousemove(f).mouseup(g),q.css({width:A,height:B,top:0,left:0,cursor:a.css("cursor")}),H.append(q),o&&o()}function f(a){a.preventDefault(),a.stopPropagation(),n&&n(a.pageX-h,a.pageY-i,j,k,l,m)}function g(){q.remove(),J.unbind("mousemove",f).unbind("mouseup",g),p&&p()}var h,i,j,k,l,m,d=d||{},n=d.move||null,o=d.start||null,p=d.end||null,q=$('<div style="width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:100000;cursor:default;"></div>');a.mousedown(function(a){0==a.button&&e(a)})}function d(a,b,c,d){var e=L.gap;return a<D+e.top?a=D+e.top:a+d-D>B-e.bottom&&(a=d>B-e.top-e.bottom?D+e.top:D+B-d-e.bottom),b<e.left?b=e.left:b+c>A-e.right&&(b=A-c-e.right),{top:a,left:b}}function e(a,b){var c=(B-b)/2+D,e=(A-a)/2,f=d(c,e,a,b),g=L.gap,h=(B-b)/2;return h<g.top&&(h=g.top),{top:f.top,left:f.left,clientTop:h,clientLeft:f.left}}function f(a,b,c){var d=null,e=null,f=["确认","取消"];"function"==typeof b?d=b:"object"==typeof b&&(b.btns&&(f[0]=b.btns[0],f[1]=b.btns[1]),"function"==typeof b.callback&&(d=b.callback),"function"==typeof b.cancel&&(e=b.cancel));var g=t.replace(/{(\w+)}/g,function(){var a=arguments[1];return"confirm"==a?f[0]:"cancel"==a?f[1]:void 0});a.append(g),a.on("click",".pro_pop_confirm_ok",function(){if(d){var a=d();0!=a&&c()}else c()}).on("click",".pro_pop_confirm_cancel",function(){if(e){var a=e();0!=a&&c()}else c()})}function g(a,b){if(this.closeFn&&this.closeFn(),a){var c="fadeOut",b=b?parseInt(b):80;"fade"==a?c="fadeOut":"slide"==a&&(c="slideUp"),this.dom[c](b,function(){$(this).remove()})}else this.dom.remove();this._mask&&(K--,0==K&&F.fadeOut(80))}function h(a){var a=a||{},b=this;this.title=a.title||"请输入标题",this.dom=$(p),this.cntDom=this.dom.find(".pro_pop_cnt"),this.closeFn=a.closeFn||null,this._mask=a.mask||!1;var c=a.html||"",g=a.width||240,h=a.height?parseInt(a.height)-41:null;if(h){this.onScrollToEnd=null,this.cntDom.css({height:h}).html('<div class="UI_scroll_body"></div>');var i=UI.scrollBar(this.cntDom);i.onScroll=function(a){a.bottom<20&&b.onScrollToEnd&&b.onScrollToEnd&&b.onScrollToEnd()},this.cntDom=this.cntDom.find(".UI_scroll_body")}a.confirm&&f(this.dom,a.confirm,function(){b.close()});var j=e(g,h||300),k="number"==typeof a.top?a.top:j.top,l="number"==typeof a.left?a.left:j.left;UI.drag(this.dom.find(".pro_pop_cpt"),this.dom,{move:function(a,c,e,f,g,h){var i=c+f,j=a+e,k=d(i,j,g,h);b.dom.css({left:k.left,top:k.top})}}),this.cntDom.prepend(c),this.dom.css({width:g,left:l,top:k}).on("click",".pro_pop_close",function(){b.close()}).find(".pro_pop_cpt").html(this.title),this._mask&&(K++,1==K&&F.fadeIn(80)),G.append(this.dom)}function i(a){var a=a||{},b=this,c=a.text||"请输入确认信息！",d=(a.callback||null,r.replace(/{text}/,c));this._mask=!0,this.dom=$(d),this.closeFn=a.closeFn||null,f(this.dom,a,function(){b.close()});var g=e(300,160);this.dom.css({width:300,left:g.clientLeft,top:g.clientTop}),K++,1==K&&F.fadeIn(80),H.append(this.dom)}function j(a,b){var c=this,d=a||"请输入确认信息！",f=s.replace(/{text}/,d);this.dom=$(f),this.closeFn=null,this.callback=b||null;var f=t.replace(/{(\w+)}/g,function(a,b){return"confirm"==b?"确定":"cancel"==b?"取消":void 0});this.dom.append(f),this.dom.on("click",".pro_pop_confirm_ok",function(){var a=c.dom.find("input").val();if(c.callback){var b=c.callback(a);0!=b&&c.close()}else c.close()}).on("click",".pro_pop_confirm_cancel",function(){c.close()});var g=e(300,160);this.dom.css({width:300,left:g.clientLeft,top:g.clientTop}),H.append(this.dom)}function k(a,b){var c=this,a=a||"请输入内容";this.dom=$(v),this.tips(a);var d=e(260,100);this.dom.css({left:d.clientLeft,top:d.clientTop}),H.append(this.dom),0!=b&&c.close(b)}function l(a){private_activePlane&&private_activePlane.close(),private_activePlane=this;var a=a||{},b=a.html||"";this.closeFn=a.closeFn||null,this.dom=$(u),this.dom.html(b),this.dom.css({width:a.width||240,height:a.height||null,top:a.top||300,left:a.left||800}),G.append(this.dom)}function m(a){var a=a||{},b=this;this.text=a.text||"请输入标题",this.closeFn=a.closeFn||null;var c=q.replace("{text}",this.text);this.dom=$(c),f(this.dom.find(".pro_miniChat"),a,function(){b.close()});var d="number"==typeof a.top?a.top:300,e="number"==typeof a.left?a.left:300;this.dom.css({left:e,top:d}),G.append(this.dom);var g=this.dom.find(".pro_miniChat").height();this.dom.animate({height:g},200)}function n(a){var a=a||{},b=this;this.dom=$(w),this.cntDom=this.dom.find(".pro_coverCnt"),this.closeDom=this.dom.find(".pro_coverClose"),this.closeFn=a.closeFn||null;var c=a.html||"";this.cntDom.prepend(c),this.dom.on("click",".pro_coverClose",function(){b.close()}),this.closeDom.hide(),this.dom.css({height:B}),this.cntDom.css({top:0,left:A}).animate({left:0},200,function(){b.closeDom.fadeIn(100)}),H.append(this.dom)}var o=['<div class="pop_lawyer">','<div class="pop_mask"></div>','<div class="pop_main_cnt"></div>','<div class="pop_fixedScreen_cnt"></div>',"</div>"].join(""),p=['<div class="pro_pop">','<div class="pro_pop_cpt"></div>','<div class="pro_pop_cnt"></div>','<a href="javascript:void(0)" class="pro_pop_close" title="关闭">×</a>',"</div>"].join(""),q=['<div class="pro_miniChatSlideCnt"><div class="pro_miniChat">','<div class="pro_miniChat_text">{text}</div>',"</div></div>"].join(""),r=['<div class="pro_confirm">','<div class="pro_confirm_text">{text}</div>',"</div>"].join(""),s=['<div class="pro_ask">','<div class="pro_ask_text">{text}</div>','<input type="text" name="pro_ask_key"/>',"</div>"].join(""),t=['<div class="pro_pop_confirm">','<a href="javascript:void(0)" class="pro_pop_confirm_ok">{confirm}</a>','<a href="javascript:void(0)" class="pro_pop_confirm_cancel">{cancel}</a>',"</div>"].join(""),u=['<div class="pro_plane"></div>'].join(""),v=['<div class="pro_prompt">','<div class="pro_cnt"></div>',"</div>"].join(""),w=['<div class="pro_cover">','<div class="pro_coverCnt"></div>','<a href="javascript:void(0)" class="pro_coverClose">〉</a>',"</div>"].join(""),x=['<style type="text/css" data-module="UI-pop-prompt-plane">','.pop_lawyer{position:absolute;top:0px;left:0px;z-index:4999;width:100%;height:0px;overflow:visible;font-family:"Microsoft Yahei"}',".pop_mask{position:absolute;top:0px;left:0px;width:100%;background:#000;display:none;opacity:0.2}",".pop_main_cnt{width:0px;height:0px;overflow:visible;}",".pop_fixedScreen_cnt{position:absolute;top:0px;left:0px;width:100%;height:0px;overflow:visible;}",".pro_pop{width:200px;_border:1px solid #eee;position:absolute;top:400px;left:300px;","background:#fff;border-radius:4px;overflow:hidden;box-shadow:2px 3px 10px rgba(0,0,0,0.6);}",".pro_pop_cpt{position:relative;height:40px;line-height:40px;margin-right:41px;overflow:hidden;border-bottom:1px solid #ebebeb;background:#f6f6f6;","color:#333;font-size:18px;text-indent:15px;cursor: default;}",".pro_pop_cnt{position:relative;min-height:100px;overflow:hidden;width:100%;}",'.pro_pop_close{display:block;position:absolute;top:0px;right:0px;width:40px;height:40px;text-align:center;line-height:40px;color:#ddd;font-family:"Simsun";font-size:40px;background:#fafafa;border:1px solid #ebebeb;border-width:0px 0px 1px 1px;text-decoration:none;}',".pro_pop_close:hover{background-color:#eee;border-left-color:#ddd;text-decoration:none;}",".pro_pop_close:active{background-color:#ddd;border-left-color:#ccc;color:#ccc;}",".pro_confirm{_border:1px solid #eee;position:absolute;background:#fff;border-radius:4px;overflow:hidden;box-shadow:2px 3px 10px rgba(0,0,0,0.6);}",".pro_confirm_text{padding:30px 10px 20px;line-height:26px;text-align:center;font-size:20px;color:#333;}",".pro_ask{_border:1px solid #eee;position:absolute;background:#fff;border-radius:4px;overflow:hidden;box-shadow:2px 3px 10px rgba(0,0,0,0.6);}",".pro_ask_text{padding:30px 10px 10px;line-height:26px;text-align:center;font-size:20px;color:#333;}",".pro_ask input{display:block;margin:0px auto 15px;height:30px;padding:4px 4px;line-height:22px;box-sizing:border-size;width:90%;}",".pro_miniChatSlideCnt{width:220px;height:0px;overflow:hidden;position:absolute;border-radius:4px;box-shadow:2px 3px 10px rgba(0,0,0,0.6);}",".pro_miniChat{position:absolute;left:0px;bottom:0px;width:100%;_border:1px solid #eee;background:#fff;overflow:hidden;}",".pro_miniChat_text{padding:20px 10px 10px;box-sizing:content-box;line-height:24px;text-align:center;font-size:14px;color:#333;}",".pro_miniChat .pro_pop_confirm a{height:26px;line-height:26px;}",".pro_pop_confirm{padding:10px 0px 15px 30px;box-sizing:content-box;text-align:center;}",".pro_pop_confirm a{display:inline-block;height:30px;padding:0px 15px;box-sizing:content-box;border-radius:3px;font-size:14px;line-height:30px;background:#38b;color:#fff;margin-right:30px;}",".pro_pop_confirm a:hover{text-decoration: none;background:#49c;}",".pro_pop_confirm a:active{text-decoration: none;background:#27a}",".pro_plane{width:200px;position:absolute;top:400px;left:300px;}",".pro_prompt{width:240px;position:absolute;padding:30px 10px;box-sizing:content-box;background:#fff;_border:1px solid #fafafa;border-radius:4px;box-shadow:2px 2px 10px rgba(0,0,0,0.5);}",".pro_cnt{font-size:18px;color:#222;text-align:center;}",".pro_cover{position:absolute;top:0px;left:0px;width:100%;height:100px;}",".pro_coverCnt{position:relative;width:100%;height:100%;background:#fff;}",'.pro_coverClose{display:block;position:absolute;top:50%;left:0px;width:20px;height:60px;padding-left:5px;text-align:center;line-height:60px;color:#ddd;font-family:"Simsun";font-size:30px;background:#555;}',".pro_coverClose:hover{background-color:#333;color:#fff;text-decoration:none;}","</style>"].join(""),y=!1;if("Microsoft Internet Explorer"==navigator.appName){var z=navigator.appVersion.split(";")[1].replace(/[ ]/g,"");("MSIE6.0"==z||"MSIE7.0"==z)&&(y=!0)}var A,B,C,D,E=$(o),F=($("html,body"),E.find(".pop_mask")),G=E.find(".pop_main_cnt"),H=E.find(".pop_fixedScreen_cnt"),I=$(window),J=$(document),K=0,L={gap:{top:0,left:0,bottom:0,right:0},zIndex:499};$("head").append(x),$("body").append(E),b(),y?(F.css({position:"absolute",height:B,top:0}),I.on("resize scroll",function(){b(),H.animate({top:D},100),F.css({top:D,height:B})})):(H.css({position:"fixed",top:0}),F.css({position:"fixed",height:B,top:0}),I.on("resize scroll",function(){b(),F.css({height:B})})),h.config={gap:function(a,b){a&&a.match(/(top|right|bottom|left)/)&&parseInt(b)&&(L.gap[a]=b)}},h.prototype.close=g,h.prototype.adapt=function(){var a=(this.dom.offset(),this.dom.width()),b=this.dom.height(),c=e(a,b);this.dom.animate({top:c.top,left:c.left},100)},i.prototype.close=g,j.prototype.close=g,j.prototype.setValue=function(a){var a=a?a.toString():"";this.dom.find("input").val(a)},k.prototype={tips:function(a){a&&this.dom.find(".pro_cnt").html(a)},close:function(a){var b=a?parseInt(a):1300,c=this;setTimeout(function(){c.dom.fadeOut(200,function(){c.dom.remove()})},b)}},private_activePlane=null;var M=!1;J.on("mousedown",function(){setTimeout(function(){M?M=!1:private_activePlane&&private_activePlane.close()},20)}).on("mousedown",".pro_plane",function(){M=!0}),l.prototype.close=g,m.prototype.close=g,n.prototype.close=function(){var a=this.dom;this.closeDom.fadeOut(100),this.cntDom.animate({left:A},400,function(){a.remove()})},a.pop=function(){return new h(arguments[0])},a.pop.config=h.config,a.miniChat=function(){return new m(arguments[0])},a.confirm=function(){return new i(arguments[0])},a.ask=function(a,b){return new j(a,b)},a.prompt=function(a,b){return new k(a,b)},a.plane=function(){return new l(arguments[0])},a.cover=function(){return new n(arguments[0])},a.drag=c}(UI),function(a){function b(a,b){document.addEventListener&&a.addEventListener("DOMMouseScroll",b,!1),a.onmousewheel=b}function c(a,b){b=b||{};var c,d,e;b.draging||(b.hoverCnt&&b.fromOut?(c=0,d=40,e=0,b.hoverBar):b.hoverBar?(c=0,d=80,e=80):b.hoverCnt?(c=0,d=200,e=600):(c=-10,d=300,e=600),clearTimeout(b.delay),b.delay=setTimeout(function(){a.stop().animate({right:c},d)},e))}function d(){var a=this,d={fromOut:!1,draging:!1,hoverBar:!1,hoverCnt:!1,delay:0};"static"==this.dom.origin.css("position")&&this.dom.origin.css({position:"relative"}),a.dom.all.on("mouseenter",function(){d.fromOut=!1,d.hoverBar=!0,c(a.dom.all,d)}).on("mouseleave",function(){d.fromOut=!1,d.hoverBar=!1,c(a.dom.all,d)}),this.dom.origin.on("mouseenter",function(){d.fromOut=!0,d.hoverCnt=!0,c(a.dom.all,d)}).on("mouseleave",function(){d.fromOut=!1,d.hoverCnt=!1,c(a.dom.all,d)}).on("click",".UI_scrollBar_down",function(){a.downward()}).on("click",".UI_scrollBar_up",function(){a.upward()}),b(this.dom.origin[0],function(){a.fix_scrollBar()});var e;this.dom.body.on("scroll",function(){clearTimeout(e),e=setTimeout(function(){if(a.onScroll){var b=parseInt(a.origin.scrollTop),c=parseInt(a.origin.totalH-a.origin.scrollTop-a.origin.height);a.onScroll({top:b,bottom:c})}},100)}),setInterval(function(){a.fix_scrollBar()},1200),UI.drag(this.dom.bar,this.dom.bar,{start:function(){d.draging=!0},move:function(b,c,d,e){var f=c+e;a.fix_content(f)},end:function(){d.draging=!1,c(a.dom.all,d)}}),this.dom.origin.append(this.dom.all),a.dom.all.css("right",-10),setTimeout(function(){a.dom.body.css({width:2*a.dom.body.width()-a.dom.body[0].clientWidth})},100)}function e(a){"object"==typeof a&&0!=a.find(".UI_scroll_body").length&&(this.dom={},this.dom.origin=a,this.dom.body=this.dom.origin.find(".UI_scroll_body"),this.dom.all=$(g),this.dom.bar=this.dom.all.find(".UI_scrollBar"),this.onScroll=null,this.origin={scrollTop:0,height:0,totalH:0},this.bar={top:0,height:0,totalH:0},d.call(this))}var f=['<style type="text/css" data-module="UI_scrollBar">',"@font-face {",'font-family:"UI";','src:url("/js/api/UI/images/ui-webfont.eot");','src:url("/js/api/UI/images/ui-webfont.eot?#iefix") format("embedded-opentype"),','url("/js/api/UI/images/ui-webfont.woff") format("woff"),','url("/js/api/UI/images/ui-webfont.ttf")  format("truetype"),','url("/js/api/UI/images/ui-webfont.svg#icon") format("svg");',"font-weight: normal;","font-style: normal;","}",".UI_scroll_body{position:relative;width:100%;height:100%;overflow-y:scroll;}",".UI_scrollBar_module{position:absolute;top:0px;right:0px;width:10px;height:100%;background:#fff;}",".UI_scrollBar_cnt{top:15px;bottom:15px;position:absolute;width:100%;background:#eee;}",".UI_scrollBar{position:absolute;top:10px;right:0px;width:100%;height:20px;border-radius:4px;background:#ccc;}",'.UI_scrollBar_up,.UI_scrollBar_down{position:absolute;width:100%;height:15px;right:0px;line-height:15px;text-align:center;color:#888;font-size:14px;font-family:"UI";background:#fff;}',".UI_scrollBar_up{top:0px;}",".UI_scrollBar_down{bottom:0px;}",".UI_scrollBar_module a:hover{text-decoration:none;background:#aaa;color:#444;}",".UI_scrollBar_module a:active{background:#666;}","</style>"].join(""),g=['<div class="UI_scrollBar_module">','<a href="javascript:void(0)" class="UI_scrollBar_up">u</a>','<div class="UI_scrollBar_cnt">','<a href="javascript:void(0)" class="UI_scrollBar"></a>',"</div>",'<a href="javascript:void(0)" class="UI_scrollBar_down">d</a>',"</div>"].join("");$(function(){$("head").append(f)}),e.prototype={fix_scrollBar:function(){this.origin.totalH=this.dom.body[0].scrollHeight,this.origin.height=this.dom.origin.height(),this.origin.scrollTop=this.dom.body.scrollTop(),this.bar.totalH=this.origin.height-30,this.bar.top=this.origin.scrollTop/this.origin.totalH*this.bar.totalH,this.bar.height=this.origin.height/this.origin.totalH*this.bar.totalH,this.dom.bar.stop().animate({top:this.bar.top,height:this.bar.height},80)},fix_content:function(a){this.bar.top=0>a?0:a>this.bar.totalH-this.bar.height?this.bar.totalH-this.bar.height:a,this.dom.bar.css({top:this.bar.top}),this.origin.scrollTop=this.bar.top/this.bar.totalH*this.origin.totalH,this.dom.body.scrollTop(this.origin.scrollTop)},downward:function(){var a=this.bar.top+10;this.fix_content(a)},upward:function(){var a=this.bar.top-10;this.fix_content(a)}},a.scrollBar=function(a){return new e(a)}}(window.UI),window.define&&define(function(a,b){b.ask=window.UI.ask,b.pop=window.UI.pop,b.miniChat=window.UI.miniChat,b.confirm=window.UI.confirm,b.prompt=window.UI.prompt,b.plane=window.UI.plane,b.cover=window.UI.cover,b.drag=window.UI.drag});